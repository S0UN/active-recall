# Concept Organizer Development Environment Configuration
# Copy this to .env and customize as needed

# =============================================================================
# ENVIRONMENT
# =============================================================================
NODE_ENV=development

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# SQLite Database
SQLITE_DB_PATH=./data/sqlite/concept-organizer.db

# Redis Cache (optional)
REDIS_URL=redis://localhost:6379
ENABLE_REDIS_CACHE=true

# =============================================================================
# VECTOR DATABASE
# =============================================================================

# Qdrant Configuration
QDRANT_URL=http://localhost:6333
QDRANT_API_KEY=
QDRANT_COLLECTION_CONCEPTS=concept-artifacts
QDRANT_COLLECTION_FOLDERS=folder-centroids

# Embedding Provider
EMBEDDING_PROVIDER=local
# For OpenAI embeddings (if provider=openai):
# OPENAI_API_KEY=your-openai-api-key-here

# =============================================================================
# PROCESSING CONFIGURATION
# =============================================================================

# Text Assembly
MIN_TEXT_LENGTH=3
MIN_WORD_COUNT=3
MAX_TEXT_LENGTH=5000
MIN_QUALITY_SCORE=0.3
SHORT_TEXT_QUALITY_SCORE=0.2

# Routing Thresholds
HIGH_CONFIDENCE_THRESHOLD=0.82
LOW_CONFIDENCE_THRESHOLD=0.65
NEW_TOPIC_THRESHOLD=0.5
DUPLICATE_THRESHOLD=0.9

# Legacy routing (for backwards compatibility)
CROSS_LINK_DELTA=0.03
CROSS_LINK_MIN_SCORE=0.79

# Batch Processing
MIN_CLUSTER_SIZE=5
ENABLE_BATCH_CLUSTERING=true
ENABLE_FOLDER_CREATION=true

# Quality Score Weights
UNIQUENESS_WEIGHT=0.6
LENGTH_WEIGHT=0.4
AVG_WORD_LENGTH_NORM=5

# Vector Configuration
VECTOR_DIMENSIONS=1536
MAX_FOLDER_MEMBERS=1000
MAX_EXEMPLARS=100
CONTEXT_SEARCH_LIMIT=50
TITLE_SEARCH_LIMIT=1

# Folder Scoring Weights
AVG_SIMILARITY_WEIGHT=0.6
MAX_SIMILARITY_WEIGHT=0.2
MAX_COUNT_BONUS=0.3
COUNT_BONUS_MULTIPLIER=0.1

# Clustering Configuration
CLUSTER_SIMILARITY_THRESHOLD=0.75
MIN_CLUSTER_FOR_SUGGESTION=2
UNSORTED_SIMILARITY_THRESHOLD=0.7
UNSORTED_SEARCH_LIMIT=20

# Cache Configuration
CACHE_TTL_DAYS=30

# =============================================================================
# LLM CONFIGURATION
# =============================================================================

# Enable/Disable LLM Features
ENABLE_LLM=false
LLM_PROVIDER=openai

# OpenAI Configuration (if using LLM)
OPENAI_LLM_API_KEY=your-openai-api-key-here
LLM_MODEL=gpt-3.5-turbo
LLM_MAX_TOKENS=1000

# Token Budget (daily limits)
DAILY_TOKEN_LIMIT=100000
MONTHLY_TOKEN_LIMIT=1000000

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Core Features
LOCAL_ONLY_MODE=true
ENABLE_DEDUPLICATION=true
ENABLE_CROSS_LINKING=true
ENABLE_BACKGROUND_JOBS=true

# AI Features (require ENABLE_LLM=true)
ENABLE_LLM_SUMMARIES=false
ENABLE_LLM_ARBITRATION=false
ENABLE_RERANKER=false

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# File Paths
KNOWLEDGE_BASE_PATH=./data/knowledge-base
AUDIT_LOG_PATH=./data/audit

# File Options
CREATE_MARKDOWN_FILES=false
ENABLE_BACKUPS=true

# =============================================================================
# LOGGING & OBSERVABILITY
# =============================================================================

# Logging
LOG_LEVEL=info
LOG_FILE=./data/logs/concept-organizer.log
LOG_TO_CONSOLE=true
LOG_STRUCTURED=true

# Health Checks
HEALTH_CHECK_PORT=3001
HEALTH_CHECK_ENABLED=true

# =============================================================================
# INTEGRATION WITH EXISTING SERVICES
# =============================================================================

# Bridge existing BatcherService to new core pipeline
BRIDGE_BATCHER_TO_CORE=true

# Use core router instead of existing classification
USE_CORE_ROUTER=false